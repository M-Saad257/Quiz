<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="shortcut icon" href="./quiz.png" type="image/x-icon">
    <title>Python Basics Mixed Test</title>
    <style>
        body {
            font-family: Segoe UI, system-ui, sans-serif;
            background: #0f172a;
            color: #111827;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            padding: 16px;
        }

        .box {
            background: #fff;
            max-width: 650px;
            width: 100%;
            padding: 24px;
            border-radius: 16px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, .3);
        }

        h1 {
            text-align: center;
            margin-top: 0
        }

        .intro {
            text-align: center;
        }

        .intro p {
            color: #374151;
        }

        .progress-wrapper {
            background: #e5e7eb;
            border-radius: 999px;
            overflow: hidden;
            height: 14px;
            margin-bottom: 18px;
        }

        .progress-bar {
            height: 100%;
            width: 0%;
            background: linear-gradient(90deg, #6366f1, #8b5cf6);
            color: white;
            font-size: 11px;
            text-align: center;
            line-height: 14px;
            transition: width .3s ease;
        }

        .question {
            font-weight: 600;
            margin-bottom: 10px
        }

        .options label {
            display: block;
            margin-bottom: 8px;
            cursor: pointer
        }

        textarea {
            width: 100%;
            min-height: 90px;
            padding: 10px;
            border-radius: 10px;
            border: 1px solid #ccc;
            font-family: monospace;
        }

        button {
            width: 100%;
            margin-top: 16px;
            padding: 12px;
            font-size: 16px;
            border: none;
            border-radius: 12px;
            background: #6366f1;
            color: white;
            cursor: pointer;
        }

        button:hover {
            background: #4f46e5
        }

        .result {
            margin-top: 20px
        }

        .correct {
            color: green;
            font-weight: 600
        }

        .wrong {
            color: red;
            font-weight: 600
        }
    </style>
</head>

<body>

    <div class="box">
        <h1>Python Basics Test</h1>

        <!-- INTRO SCREEN -->
        <div id="intro" class="intro">
            <p><strong>Be Honest ðŸ‘€</strong></p>
            <p>This test will help identify your weak areas in Python basics.</p>
            <p>ðŸ“¸ Take a screenshot of your result and send it to me after completion.</p>
            <button onclick="startTest()">Start Test</button>
        </div>

        <!-- QUIZ -->
        <div id="quizSection" style="display:none;">
            <div class="progress-wrapper">
                <div class="progress-bar" id="progressBar">0%</div>
            </div>
            <div id="quiz"></div>
            <button onclick="nextQuestion()">Next</button>
        </div>

        <!-- RESULT -->
        <div id="result" class="result"></div>
    </div>

    <script>
        const questions = [
            { type: "mcq", q: "Which symbol is used for comments in Python?", options: ["//", "#", "/*", "--"], answer: 1 },
            { type: "text", q: "What are comments in Python?", keywords: ["ignore", "not executed", "explain", "read"] },
            { type: "text", q: "Write one line of code to create a variable x with value 10", keywords: ["x", "=", "10"] },
            { type: "mcq", q: "Which data type is used to store text in Python?", options: ["int", "float", "str", "bool"], answer: 2 },
            { type: "text", q: "What is a variable in Python?", keywords: ["store", "value", "memory"] },
            { type: "mcq", q: "What is the output of: print(len('Ibrahim')) ?", options: ["5", "6", "7", "Error"], answer: 2 },
            { type: "text", q: "Write one string method used to convert text into uppercase", keywords: ["upper"] },
            { type: "mcq", q: "Which brackets are used to create a list?", options: ["()", "{}", "[]", "<>"], answer: 2 },
            { type: "text", q: "How do you access the first element of a list named myList?", keywords: ["mylist", "[0]"] },
            { type: "mcq", q: "Which of the following is a tuple?", options: ["[1,2]", "(1,2)", "{1,2}", "None"], answer: 1 },
            { type: "text", q: "Why can't we change values inside a tuple?", keywords: ["immutable", "cannot change"] },
            { type: "text", q: "Write a dictionary with key 'name' and value 'Ali'", keywords: ["{", "name", "ali", "}"] },
            { type: "mcq", q: "Which data structure does not allow duplicate values?", options: ["List", "Tuple", "Set", "Dictionary"], answer: 2 },
            { type: "text", q: "What is a set in Python?", keywords: ["unique", "no duplicate", "collection"] },
            { type: "text", q: "Write an if condition that checks if x is greater than 5", keywords: ["if", "x", ">", "5"] }
        ];

        let index = 0;
        let score = 0;
        let review = [];

        function startTest() {
            document.getElementById('intro').style.display = 'none';
            document.getElementById('quizSection').style.display = 'block';
            loadQuestion();
        }

        function updateProgress() {
            const percent = Math.round((index / questions.length) * 100);
            const bar = document.getElementById('progressBar');
            bar.style.width = percent + '%';
            bar.innerText = percent + '%';
        }

        function loadQuestion() {
            updateProgress();
            const q = questions[index];
            const quiz = document.getElementById('quiz');
            quiz.innerHTML = `<div class='question'>Q${index + 1}: ${q.q}</div>`;

            if (q.type === "mcq") {
                q.options.forEach((opt, i) => {
                    quiz.innerHTML += `<label><input type='radio' name='ans' value='${i}'> ${opt}</label><br>`;
                });
            } else {
                quiz.innerHTML += `<textarea id='textAnswer' placeholder='Write your answer here...'></textarea>`;
            }
        }

        function nextQuestion() {
            const q = questions[index];
            let correct = false;

            if (q.type === "mcq") {
                const selected = document.querySelector("input[name='ans']:checked");
                if (!selected) return alert("Select an option");
                correct = parseInt(selected.value) === q.answer;
            } else {
                const ans = document.getElementById('textAnswer').value.toLowerCase();
                let matched = 0;
                q.keywords.forEach(k => { if (ans.includes(k)) matched++; });
                correct = matched >= Math.ceil(q.keywords.length / 2);
                if (ans == "") return alert("Enter your answer");
            }

            if (correct) score++;
            review.push({ q: q.q, correct });
            index++;

            if (index < questions.length) loadQuestion();
            else showResult();
        }

        function showResult() {
            document.getElementById('quizSection').style.display = 'none';
            let html = `<h2>Score: ${score} / ${questions.length}</h2>`;
            review.forEach((r, i) => {
                html += `<p>${i + 1}. ${r.q}<br><span class='${r.correct ? 'correct' : 'wrong'}'>${r.correct ? 'Correct' : 'Wrong'}</span></p>`;
            });
            document.getElementById('result').innerHTML = html;
        }
    </script>

</body>

</html>
